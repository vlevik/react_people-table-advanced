(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var c=a(25),n=a(8),r=(a(34),a(35),a(3)),s=a(4),l=a(7),i=a(5),o=a(0),j=a(6),d=a(9),b=a(10),u=a.n(b);function h(e,t){var a=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(i.a)(e,2),c=t[0],n=t[1];null===n?a.delete(c):Array.isArray(n)?(a.delete(c),n.forEach((function(e){a.append(c,e)}))):a.set(c,n)})),a.toString()}var O=["All","Male","Female"],p=["16","17","18","19","20"],m="query",x="sex",v="centuries",f="sort",g="order",N="All",w=a(2),y=function(e){var t,a=e.setFilteredPeople,c=e.allPeople,r=Object(n.d)(),s=Object(i.a)(r,2),l=s[0],b=s[1],f=l.getAll(v)||[];Object(o.useEffect)((function(){var e,t=Object(d.a)(c),n=(l.get(m)||"").toLowerCase().trim();n&&(t=null===(e=t)||void 0===e?void 0:e.filter((function(e){var t,a;return e.name.toLowerCase().includes(n)||(null===(t=e.motherName)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(a=e.fatherName)||void 0===a?void 0:a.toLowerCase().includes(n))})));(l.get(x)||"")===N&&l.delete(x),l.get(x)&&(t=t.filter((function(e){var t;return e.sex===(null===(t=l.get(x))||void 0===t?void 0:t.slice(0,1))})));var r=l.getAll(v);r&&r.length&&(t=t.filter((function(e){return r.includes((e.born+99).toString().slice(0,2))}))),a(t)}),[l]);return Object(w.jsxs)("nav",{className:"panel",children:[Object(w.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(w.jsx)("p",{className:"panel-tabs","data-cy":"SexFilter",children:O.map((function(e){return Object(w.jsx)(n.b,{to:{search:h(l,Object(j.a)({},x,e===N?null:e.toLowerCase()))},className:u()({"is-active":!l.get(x)&&e===N||l.get(x)===e.toLowerCase()}),children:e},e)}))}),Object(w.jsx)("div",{className:"panel-block",children:Object(w.jsxs)("p",{className:"control has-icons-left",children:[Object(w.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",value:l.get(m)||"",onChange:function(e){var t=new URLSearchParams(l);t.set(m,e.target.value),e.target.value||t.delete(m),b(t)}}),Object(w.jsx)("span",{className:"icon is-left",children:Object(w.jsx)("i",{className:"fas fa-search","aria-hidden":"true",onClick:function(){return l.delete(m)}})})]})}),Object(w.jsx)("div",{className:"panel-block",children:Object(w.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(w.jsx)("div",{className:"level-left",children:p.map((function(e){return Object(w.jsx)(n.b,{to:{search:h(l,Object(j.a)({},v,f.includes(e)?f.filter((function(t){return t!==e})):[].concat(Object(d.a)(f),[e])))},"data-cy":"century",className:u()("button mr-1",{"is-info":l.getAll(v).includes(e)}),children:e},e)}))}),Object(w.jsx)("div",{className:"level-right ml-4",children:Object(w.jsx)(n.b,{"data-cy":"centuryALL",className:u()("button is-success",{"is-outlined":!(null===(t=l.getAll(v))||void 0===t||!t.length)}),to:{search:h(l,Object(j.a)({},v,null))},children:"All"})})]})}),Object(w.jsx)("div",{className:"panel-block",children:Object(w.jsx)(n.b,{className:"button is-link is-outlined is-fullwidth",to:"/people",children:"Reset all filters"})})]})},k=(a(37),function(){return Object(w.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(w.jsx)("div",{className:"Loader__content"})})}),L=function(e){var t=e.person,a=e.mother,c=e.father,s=Object(r.q)().personSlug,l=function(e,t){var a;switch(!0){case!!e:a=Object(w.jsx)(n.b,{to:"".concat(null===e||void 0===e?void 0:e.slug),className:u()({"has-text-danger":"f"===(null===e||void 0===e?void 0:e.sex)}),children:null===e||void 0===e?void 0:e.name});break;case null!==t:a=t;break;default:a="-"}return a},i=l(a,t.motherName),o=l(c,t.fatherName);return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("tr",{"data-cy":"person",className:u()({"has-background-warning":s===t.slug}),children:[Object(w.jsx)("td",{children:Object(w.jsx)(n.b,{to:"".concat(null===t||void 0===t?void 0:t.slug),className:u()({"has-text-danger":"f"===t.sex}),children:t.name})}),Object(w.jsx)("td",{children:t.sex}),Object(w.jsx)("td",{children:t.born}),Object(w.jsx)("td",{children:t.died}),Object(w.jsx)("td",{children:i}),Object(w.jsx)("td",{children:o})]})})},C=[{title:"Name",sort:!0},{title:"Sex",sort:!0},{title:"Born",sort:!0},{title:"Died",sort:!0},{title:"Mother",sort:!1},{title:"Father",sort:!1}],P=function(e){var t=e.people,a=e.setPeople,c=Object(n.d)(),r=Object(i.a)(c,1)[0],s=function(e){return null===t||void 0===t?void 0:t.find((function(t){return e===t.name}))},l=r.get(f),b=r.get(g);return Object(o.useEffect)((function(){if(l){var e=function(e,t,a){var c=Object(d.a)(e);switch(t){case"born":case"died":c=c.sort((function(e,a){return a[t]-e[t]}));break;case"sex":case"name":c=c.sort((function(e,a){return e[t].localeCompare(a[t])}))}return"desc"===a&&c.reverse(),c}(t,l,b||"asc");a(e)}}),[l,b]),Object(w.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(w.jsx)("thead",{children:Object(w.jsx)("tr",{children:C.map((function(e){var t;return Object(w.jsx)("th",{children:Object(w.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:[e.title,e.sort&&Object(w.jsx)(n.b,{to:{search:h(r,(t={},Object(j.a)(t,f,l===e.title.toLowerCase()&&b?null:e.title.toLowerCase()),Object(j.a)(t,g,b||l!==e.title.toLowerCase()?null:"desc"),t))},children:Object(w.jsx)("span",{className:"icon",children:Object(w.jsx)("i",{className:u()("fas fa-sort",{"fa-sort-up":l&&!b&&l===e.title.toLowerCase(),"fa-sort-down":l&&b&&l===e.title.toLowerCase()})})})})]})},e.title)}))})}),Object(w.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((function(e){var t=s(e.motherName),a=s(e.fatherName);return Object(w.jsx)(L,{person:e,mother:t,father:a},e.slug)}))})]})},S="https://mate-academy.github.io/react_people-table/api/people.json";function A(e){return new Promise((function(t){return setTimeout(t,e)}))}function F(){return E.apply(this,arguments)}function E(){return(E=Object(l.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A(500).then((function(){return fetch(S)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=function(){var e,t=Object(o.useState)([]),a=Object(i.a)(t,2),c=a[0],n=a[1],r=Object(o.useState)([]),j=Object(i.a)(r,2),d=j[0],b=j[1],u=Object(o.useState)(!0),h=Object(i.a)(u,2),O=h[0],p=h[1],m=Object(o.useState)(!1),x=Object(i.a)(m,2),v=x[0],f=x[1];switch(Object(o.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(s.a)().mark((function e(){var t;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F();case 3:t=e.sent,n(t),b(t),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(0),f(!0),e.t0;case 12:return e.prev=12,p(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),!0){case O:e=Object(w.jsx)(k,{});break;case v:e=Object(w.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:"Something went wrong"});break;case!d.length:e=Object(w.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"});break;case!(null!==c&&void 0!==c&&c.length):e=Object(w.jsx)("p",{children:"There are no people matching the current search criteria"});break;case!(null===c||void 0===c||!c.length):e=Object(w.jsx)(P,{people:c,setPeople:n})}return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h1",{className:"title",children:"People Page"}),Object(w.jsx)("div",{className:"block",children:Object(w.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[Object(w.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:!(null===d||void 0===d||!d.length)&&Object(w.jsx)(y,{setFilteredPeople:n,allPeople:d})}),Object(w.jsx)("div",{className:"column",children:Object(w.jsx)("div",{className:"box table-container",children:e})})]})})]})},R=function(){var e=function(e){var t=e.isActive;return u()("navbar-item",{"has-background-grey-lighter":t})};return Object(w.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(w.jsx)("div",{className:"container",children:Object(w.jsxs)("div",{className:"navbar-brand",children:[Object(w.jsx)(n.c,{className:e,to:"/",children:"Home"}),Object(w.jsx)(n.c,{className:e,to:"/people",children:"People"})]})})})},T=function(){return Object(w.jsx)("h1",{className:"title",children:"Home Page"})},M=(a(38),function(){return Object(w.jsxs)("div",{"data-cy":"app",children:[Object(w.jsx)(R,{}),Object(w.jsx)("div",{className:"section",children:Object(w.jsx)("div",{className:"container",children:Object(w.jsxs)(r.d,{children:[Object(w.jsx)(r.b,{path:"*",element:Object(w.jsx)("h1",{className:"title",children:"Page not found"})}),Object(w.jsx)(r.b,{path:"/",element:Object(w.jsx)(T,{})}),Object(w.jsx)(r.b,{path:"/home",element:Object(w.jsx)(r.a,{to:"/",replace:!0})}),Object(w.jsx)(r.b,{path:"/people",element:Object(w.jsx)(_,{}),children:Object(w.jsx)(r.b,{path:":personSlug",element:Object(w.jsx)(_,{})})})]})})})]})});Object(c.createRoot)(document.getElementById("root")).render(Object(w.jsx)(n.a,{children:Object(w.jsx)(M,{})}))}},[[39,1,2]]]);
//# sourceMappingURL=main.c5be7f53.chunk.js.map